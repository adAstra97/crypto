<div *ngIf="isLoading" class="spinner">
  <mat-spinner></mat-spinner>
</div>

<div *ngIf="errorMessage" class="error">
  <p>{{ errorMessage }}</p>
</div>

<div *ngIf="!isLoading && !errorMessage">
  <h1>{{ coin.name | titlecase }} ({{ coin.symbol }})</h1>
  <img [src]="getIconUrl(coin.symbol)" alt="{{ coin.symbol }}" width="100" />

  <p>Rank: {{ coin.rank }}</p>
  <p>Supply: {{ coin.supply | number }}</p>
  <p>Price (USD): {{ coin.priceUsd | number: '1.2-2' }}</p>
  <p>Market Cap (USD): {{ coin.marketCapUsd | number: '1.2-2' }}</p>
  <p>Max Supply: {{ coin.maxSupply | number }}</p>

  <div class="chart-options">
    <label for="timeRange">Time range:</label>
    <select id="timeRange" (change)="onTimeRangeChange($event)">
      <option value="h1">1 Hour</option>
      <option value="h12">12 Hours</option>
      <option value="d1" selected>24 Hours</option>
    </select>
  </div>

  <div class="chart">
    <canvas id="coinChart"></canvas>
  </div>

  <button (click)="openAddCoinModal($event, coin)">Add to Portfolio</button>
  <button (click)="goBack()">Back to List</button>
</div>

<app-add-coin-modal
  *ngIf="isAddCoinModalOpen"
  [coin]="selectedCoin"
  (close)="closeAddCoinModal()"
  (addCoin)="addToPortfolio($event)"
></app-add-coin-modal>
